{"version":3,"file":"view.js","mappings":"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","sources":["webpack://formo-newsticker/./src/view.js"],"sourcesContent":["const newstickers = document.querySelectorAll('.formo-newsticker');\n\nlet resizeTimer;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  newstickers.forEach((newsticker) => {\n    clearTimeout(resizeTimer);\n    resizeTimer = setTimeout(function() {\n      newstickers.forEach((newsticker) => {\n        init(newsticker);\n      })\n    }, 250)\n  })\n});\n\nlet prevWidth = window.innerWidth;\n\nwindow.addEventListener('resize', () => {\n  const widthChanged = window.innerWidth !== prevWidth;\n\n  if (!widthChanged) {\n    return;\n  }\n  \n  clearTimeout(resizeTimer);\n  resizeTimer = setTimeout(function() {\n    newstickers.forEach(newsTicker => {\n      init(newsTicker);\n    });\n  }, 250)\n  prevWidth = window.innerWidth;\n});\n\n\nfunction init(newsticker) {\n  const seconds = newsticker.getAttribute('data-scrollspeed');\n  const duration = seconds * 1000;\n  let contents = newsticker.querySelectorAll('.formo-newsticker_content');\n  const contentWidth = contents[0].offsetWidth;\n\n  if ( contents.length < 2 && windowFraction(contentWidth) > 0.45) { \n    const factor = Math.floor(windowFraction(contentWidth));\n    for (let i = 0; i < factor; i++) {\n      const clone = contents[0].cloneNode(true);\n      newsticker.appendChild(clone);\n    }  \n  }\n  contents = newsticker.querySelectorAll('.formo-newsticker_content');\n  animate(contents, contentWidth, duration);\n}\n\nfunction animate(elements, elementWidth, duration) {\n  elements.forEach((element) => {\n    element.animate([\n      {transform: `translateX(0px)`},\n      {transform: `translateX(-${elementWidth}px)`}\n    ], {\n      duration: duration,\n      iterations: Infinity\n    });\n  })\n}\n\nfunction windowFraction(contentWidth) {\n  return window.innerWidth / contentWidth * 2;\n}\n\nfunction throttle(fn, wait) {\n  let time = Date.now();\n  return function() {\n    if ((time + wait - Date.now()) < 0) {\n      fn();\n      time = Date.now();\n    }\n  }\n}"],"names":["newstickers","document","querySelectorAll","resizeTimer","addEventListener","forEach","newsticker","clearTimeout","setTimeout","init","prevWidth","window","innerWidth","widthChanged","newsTicker","seconds","getAttribute","duration","contents","contentWidth","offsetWidth","length","windowFraction","factor","Math","floor","i","clone","cloneNode","appendChild","animate","elements","elementWidth","element","transform","iterations","Infinity","throttle","fn","wait","time","Date","now"],"sourceRoot":""}